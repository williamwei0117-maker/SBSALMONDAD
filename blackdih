--[[
    ğŸ¦† é´¨å˜´ç¸ç›´æ›å¼ä»‹é¢ 3.6.4 - ç²¾ç°¡å„ªåŒ–ç‰ˆ
    âœ… é¸é …ï¼šå…¨ç›®æ¨™å¿«æ”»ã€ç§’æ®º(é˜²å¡)ã€é£›è¡Œ(1ä¸Š2ä¸‹)ã€æå‡é£›è¡Œé€Ÿ(+)ã€FPSç°è‰²å„ªåŒ–
    è£½ä½œäºº: salmomydog
--]]

local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local lp = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local SG = Instance.new("ScreenGui", game:GetService("CoreGui")); SG.Name = "Platypus_V364_Slim"
local Main = Instance.new("Frame", SG); Main.Size = UDim2.new(0, 260, 0, 420); Main.Position = UDim2.new(0.05, 0, 0.2, 0); Main.BackgroundColor3 = Color3.new(1, 1, 1); Main.BorderSizePixel = 0; Main.Active = true

-- æ¨™é¡Œèˆ‡å‰å‰
local Title = Instance.new("TextLabel", Main); Title.Size = UDim2.new(1, 0, 0, 50); Title.Text = "é´¨å˜´ç¸è…³æœ¬ 3.6.4"; Title.Font = "SourceSansBold"; Title.TextSize = 20; Title.BackgroundTransparency = 1
local Close = Instance.new("TextButton", Main); Close.Size = UDim2.new(0, 28, 0, 28); Close.Position = UDim2.new(1, -35, 0, 12); Close.BackgroundColor3 = Color3.fromRGB(200, 200, 200); Close.Text = "X"; Close.BorderSizePixel = 0; Close.MouseButton1Click:Connect(function() SG:Destroy() end)

-- æ»¾å‹•å®¹å™¨
local Container = Instance.new("ScrollingFrame", Main); Container.Size = UDim2.new(1, -20, 1, -80); Container.Position = UDim2.new(0, 10, 0, 65); Container.BackgroundTransparency = 1; Container.BorderSizePixel = 0; Container.CanvasSize = UDim2.new(0, 0, 2, 0)
Instance.new("UIListLayout", Container).Padding = UDim.new(0, 10)

-- æ‹–æ›³èˆ‡ Y éµ
local d, s, p; Main.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then d=true s=i.Position p=Main.Position end end)
UIS.InputChanged:Connect(function(i) if d and i.UserInputType == Enum.UserInputType.MouseMovement then local delta=i.Position-s Main.Position=UDim2.new(p.X.Scale,p.X.Offset+delta.X,p.Y.Scale,p.Y.Offset+delta.Y) end end)
UIS.InputEnded:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then d=false end end)
UIS.InputBegan:Connect(function(i, proc) if not proc and i.KeyCode == Enum.KeyCode.Y then Main.Visible = not Main.Visible end end)

local function AddButton(name, callback)
    local btn = Instance.new("TextButton", Container)
    btn.Size = UDim2.new(1, 0, 0, 48); btn.BackgroundColor3 = Color3.new(1, 1, 1); btn.BorderSizePixel = 1; btn.BorderColor3 = Color3.fromRGB(230, 230, 230); btn.Text = name; btn.Font = "SourceSansBold"; btn.TextSize = 18
    local active = false
    btn.MouseButton1Click:Connect(function() active = not active btn.BackgroundColor3 = active and Color3.new(0, 1, 0) or Color3.new(1, 1, 1) callback(active) end)
    return btn
end

-- --- 1. å…¨ç›®æ¨™å¿«é€Ÿæ”»æ“Š (NPC + ç©å®¶) ---
local fastAtk = false
task.spawn(function()
    while true do RunService.Heartbeat:Wait()
        if fastAtk then pcall(function()
            local Net = ReplicatedStorage.Modules.Net
            local Enemies = workspace:FindFirstChild("Enemies")
            local Targets = {}
            if Enemies then for _, v in pairs(Enemies:GetChildren()) do if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then table.insert(Targets, v) end end end
            for _, plr in pairs(Players:GetPlayers()) do if plr ~= lp and plr.Character and plr.Character:FindFirstChild("Humanoid") and plr.Character.Humanoid.Health > 0 then table.insert(Targets, plr.Character) end end
            for _, t in pairs(Targets) do
                local r = t:FindFirstChild("HumanoidRootPart")
                if r and lp:DistanceFromCharacter(r.Position) < 25000 then
                    Net["RE/RegisterAttack"]:FireServer(0)
                    Net["RE/RegisterHit"]:FireServer(r, {{t, r}})
                end
            end
        end) end
    end
end)
AddButton("å…¨ç›®æ¨™å¿«é€Ÿæ”»æ“Š", function(state) fastAtk = state end)

-- --- 2. ç§’æ®ºåŠŸèƒ½ (é˜²å¡æ­»å„ªåŒ–ç‰ˆ) ---
local oneKill, currentChar, isTP, cdAct = false, nil, false, false
local function doSafeTP(hrp)
    if isTP then return end; isTP = true
    local start = os.clock()
    hrp.Velocity = Vector3.new(0,0,0) -- å‚³é€å‰æ¸…ç©ºé€Ÿåº¦é˜²å½ˆé£›
    local conn; conn = RunService.Heartbeat:Connect(function()
        if os.clock()-start >= 0.3 or not currentChar or not currentChar.Parent then 
            conn:Disconnect(); isTP = false; return 
        end
        hrp.CFrame = CFrame.new(0, -190000, 0) 
    end)
end
task.spawn(function()
    while true do RunService.Heartbeat:Wait()
        if oneKill and not cdAct and not isTP and lp.Character then
            currentChar = lp.Character
            local hrp = currentChar:FindFirstChild("HumanoidRootPart")
            if hrp and (hrp:FindFirstChild("SwordDanceAttack") or hrp:FindFirstChild("TridentDoughZ2") or hrp:FindFirstChild("Buddha2Pickup")) then
                local dly = (hrp:FindFirstChild("TridentDoughZ2") and 0.8) or 0.25
                cdAct = true; task.delay(4.5, function() cdAct = false end)
                task.delay(dly, function() doSafeTP(hrp) end)
            end
        end
    end
end)
AddButton("ç§’æ®º (é˜²å¡æ­»æ­¸èˆªç‰ˆ)", function(state) oneKill = state end)

-- --- 3. é£›è¡Œæ§åˆ¶èˆ‡é€Ÿåº¦æå‡ ---
local flyActive, flySpeed, moveUp, moveDown = false, 1, false, false
UIS.InputBegan:Connect(function(i, p) if not p then if i.KeyCode == Enum.KeyCode.One then moveUp = true elseif i.KeyCode == Enum.KeyCode.Two then moveDown = true end end end)
UIS.InputEnded:Connect(function(i, p) if i.KeyCode == Enum.KeyCode.One then moveUp = false elseif i.KeyCode == Enum.KeyCode.Two then moveDown = false end end)

task.spawn(function()
    while true do RunService.Heartbeat:Wait()
        local hrp = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
        if flyActive and hrp and not isTP then
            if not hrp:FindFirstChild("DuckV") then
                Instance.new("BodyVelocity", hrp).Name = "DuckV"; Instance.new("BodyGyro", hrp).Name = "DuckG"
                hrp.DuckV.MaxForce = Vector3.new(1,1,1)*math.huge; hrp.DuckG.MaxTorque = Vector3.new(1,1,1)*math.huge
            end
            local vel = lp.Character.Humanoid.MoveDirection * (flySpeed * 30)
            if moveUp then vel = vel + Vector3.new(0, 50, 0) elseif moveDown then vel = vel + Vector3.new(0, -50, 0) end
            hrp.DuckV.Velocity = vel; hrp.DuckG.CFrame = workspace.CurrentCamera.CFrame
        elseif hrp and hrp:FindFirstChild("DuckV") then hrp.DuckV:Destroy(); hrp.DuckG:Destroy() end
    end
end)
AddButton("é£›è¡Œé–‹å•Ÿ [1ä¸Šå‡/2ä¸‹é™]", function(state) flyActive = state end)

-- å–®ä¸€é€Ÿåº¦æå‡æŒ‰éˆ• (è¶ŠæŒ‰è¶Šå¿«)
AddButton("æå‡é£›è¡Œé€Ÿåº¦ (+)", function() 
    flySpeed = flySpeed + 3 
    print("ç•¶å‰é£›è¡Œå€ç‡:", flySpeed)
end)

-- --- 4. æ¥µè‡´ FPS ç°è‰²å„ªåŒ– ---
AddButton("FPS ç°è‰²æ¨¡å¼", function(state)
    if state then
        for _, v in pairs(game:GetDescendants()) do
            if v:IsA("Part") or v:IsA("MeshPart") or v:IsA("UnionOperation") then
                v.Material = Enum.Material.Plastic; v.Color = Color3.fromRGB(120, 120, 120); v.Reflectance = 0
            elseif v:IsA("Decal") or v:IsA("Texture") or v:IsA("ParticleEmitter") then v:Destroy() end
        end
        game:GetService("Lighting").GlobalShadows = false
    end
end)

print("é´¨å˜´ç¸ 3.6.4 ç²¾ç°¡ç‰ˆå•Ÿå‹•æˆåŠŸï¼")
